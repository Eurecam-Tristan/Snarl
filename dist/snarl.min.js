!function(t,n){"use strict";function e(){console.debug("Initialising Snarl...");var t=n.createElement("div");t.setAttribute("id","snarl-wrapper"),t.addEventListener("click",i.clickNotification),n.body.appendChild(t)}var i=i||{};i={count:0,notifications:{},addNotification:function(t){var e="<h3>"+t.title+"</h3><p>"+t.text+"</p>",a=n.createElement("div");a.className="snarl-notification",a.innerHTML=e,i.count+=1;var o="snarl-notification-"+i.count;i.notifications[o]=t.action,a.setAttribute("id",o),n.getElementById("snarl-wrapper").appendChild(a),void 0===t.timeout&&(t.timeout=5e3),null!==t.timeout&&setTimeout(function(){n.getElementById("snarl-wrapper").removeChild(a)},t.timeout)},clickNotification:function(n){if("snarl-wrapper"!==n.toElement.getAttribute("id")){for(var e=3,a=n.toElement;-1===a.className.lastIndexOf("snarl-notification");){if(!(e>0))return void console.debug("Clicked inside #snarl-wrapper but no notification was found?");a=a.parentElement}var o=a.getAttribute("id");o=o.match(/snarl-notification-[0-9]+/)[0];var r=i.notifications[o];void 0!==r&&null!==r&&(r.isString?t.location=r:r.isFunction&&r())}}},function(){"complete"===n.readyState||"interactive"===n.readyState&&n.body?e():n.addEventListener?n.addEventListener("DOMContentLoaded",function(){n.removeEventListener("DOMContentLoaded",null,!1),e()},!1):n.attachEvent&&n.attachEvent("onreadystatechange",function(){"complete"===n.readyState&&(n.detachEvent("onreadystatechange",null),e())})}(),t.Snarl=i}(window,document);
