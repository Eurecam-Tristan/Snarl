!function(t,e){"use strict";function i(){console.debug("Initialising Snarl...");var t=e.createElement("div");t.setAttribute("id","snarl-wrapper"),t.addEventListener("click",n.clickNotification),e.body.appendChild(t)}var n=n||{};n={count:0,notifications:{},makeID:function(){for(var t="",e="abcdefghijklmnopqrstuvwxyz0123456789",i=0;5>i;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},addNotification:function(t){var i='<h3 class="title">'+t.title+'</h3><p class="text">'+t.text+"</p>",o=e.createElement("div"),a={};o.className="snarl-notification",o.innerHTML=i,n.count+=1;for(var c=n.makeID();void 0!==n.notifications[c];)c=n.makeID();o.setAttribute("id","snarl-notification-"+c),e.getElementById("snarl-wrapper").appendChild(o);var r=null;return void 0===t.timeout&&(t.timeout=5e3),null!==t.timeout&&(r=setTimeout(function(){n.removeNotification(c)},t.timeout)),a.timeout=t.timeout,a.action=t.action,a.timer=r,a.active=!0,n.notifications[c]=a,c},removeNotification:function(t){var i=e.getElementById("snarl-notification-"+t);i.parentElement.removeChild(i),clearTimeout(n.notifications[t].timer),n.notifications[t].active=!1},clickNotification:function(e){if("snarl-wrapper"!==e.toElement.getAttribute("id")){for(var i=3,o=e.toElement;-1===o.className.lastIndexOf("snarl-notification");){if(!(i>0))return void console.debug("Clicked inside #snarl-wrapper but no notification was found?");o=o.parentElement}var a=o.getAttribute("id");a=/snarl-notification-([a-zA-Z0-9]+)/.exec(a)[1];var c=n.notifications[a];void 0!==c&&null!==c&&(c.isString?t.location=c:c.isFunction&&c())}},isDismissed:function(t){return n.notifications[t].active},setTitle:function(t,i){e.getElementById("snarl-notification-"+t).getElementsByClassName("title")[0].textContent=i},setText:function(t,i){e.getElementById("snarl-notification-"+t).getElementsByClassName("text")[0].textContent=i},setTimeout:function(t,e){var i=n.notifications[t].timer;null!==i&&clearTimeout(i),i=null,null!==e&&(i=setTimeout(function(){n.removeNotification(t)},e)),n.notifications[t].timer=i,n.notifications[t].timeout=e,!n.notifications[t].active}},function(){"complete"===e.readyState||"interactive"===e.readyState&&e.body?i():e.addEventListener?e.addEventListener("DOMContentLoaded",function(){e.removeEventListener("DOMContentLoaded",null,!1),i()},!1):e.attachEvent&&e.attachEvent("onreadystatechange",function(){"complete"===e.readyState&&(e.detachEvent("onreadystatechange",null),i())})}(),t.Snarl=n}(window,document);
