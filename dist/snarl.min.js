!function(t,i){"use strict";function e(t){if(void 0===a.notifications[t]&&(a.notifications[t]={}),null===a.notifications[t].element||void 0===a.notifications[t].element){var e='<h3 class="title"></h3><p class="text"></p><div class="snarl-close"><i class="fa fa-close"></i></div>',n=i.createElement("div");n.innerHTML=e,n.className="snarl-notification",n.setAttribute("id","snarl-notification-"+t),a.notifications[t].element=n}null===a.notifications[t].element.parentElement&&i.getElementById("snarl-wrapper").appendChild(a.notifications[t].element)}function n(t,i){var e,n={};for(e in t)n[e]=t[e];for(e in i)n[e]=i[e];return n}function o(){console.debug("Initialising Snarl...");var t=i.createElement("div");t.setAttribute("id","snarl-wrapper"),t.addEventListener("click",a.clickNotification),i.body.appendChild(t)}var a=a||{},c={title:"",text:"",timeout:5e3,action:""};a={count:0,notifications:{},makeID:function(){for(var t="",i="abcdefghijklmnopqrstuvwxyz0123456789",e=0;5>e;e++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},addNotification:function(t){a.count+=1;for(var i=a.makeID();void 0!==a.notifications[i];)i=a.makeID();t=t||{};var o=n(c,t);return e(i),a.editNotification(i,o),i},editNotification:function(t,i){e(t);var n=a.notifications[t].element;if(void 0!==i.text&&(n.getElementsByClassName("text")[0].textContent=i.text),void 0!==i.title&&(n.getElementsByClassName("title")[0].textContent=i.title),void 0!==i.timeout){null!==i.timer&&clearTimeout(a.notifications[t].timer);var o=null;void 0===i.timeout&&(i.timeout=5e3),null!==i.timeout&&(o=setTimeout(function(){a.removeNotification(t)},i.timeout)),a.notifications[t].timer=o,a.notifications[t].timeout=i.timeout}void 0!==i.action&&(a.notifications[t].action=i.action)},removeNotification:function(t){var e=i.getElementById("snarl-notification-"+t);e.parentElement.removeChild(e),clearTimeout(a.notifications[t].timer),a.notifications[t].active=!1},clickNotification:function(i){if("snarl-wrapper"!==i.toElement.getAttribute("id")){for(var e=3,n=i.toElement,o=!1;-1===n.className.lastIndexOf("snarl-notification");){if(!(e>0))return void console.debug("Clicked inside #snarl-wrapper but no notification was found?");-1!==n.className.lastIndexOf("snarl-close")&&(o=!0),n=n.parentElement}var c=n.getAttribute("id");if(c=/snarl-notification-([a-zA-Z0-9]+)/.exec(c)[1],o)a.removeNotification(c);else{var l=a.notifications[c];if(void 0===l||null===l)return;l.isString?t.location=l:l.isFunction&&l()}}},isDismissed:function(t){return null!==a.notifications[t].element.parentElement},setTitle:function(t,i){a.editNotification(t,{title:i})},setText:function(t,i){a.editNotification(t,{text:i})},setTimeout:function(t,i){a.editNotification(t,{timeout:i})}},function(){"complete"===i.readyState||"interactive"===i.readyState&&i.body?o():i.addEventListener?i.addEventListener("DOMContentLoaded",function(){i.removeEventListener("DOMContentLoaded",null,!1),o()},!1):i.attachEvent&&i.attachEvent("onreadystatechange",function(){"complete"===i.readyState&&(i.detachEvent("onreadystatechange",null),o())})}(),t.Snarl=a}(window,document);